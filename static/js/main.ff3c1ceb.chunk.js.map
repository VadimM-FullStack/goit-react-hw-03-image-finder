{"version":3,"sources":["components/Modal/Modal.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","services/images-api.jsx","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","App.js","index.js","index.module.css","components/Searchbar/Searchbar.module.css"],"names":["module","exports","ImagesApi","fetchImages","searchQuery","currentPage","axios","get","then","responce","data","hits","Component","Searchbar","state","query","handleChange","event","setState","currentTarget","value","handleSubmit","preventDefault","props","onSubmit","className","styles","SearchForm","this","type","SearchFormBtn","SearchFormBtnLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","ImageGalleryItem","src","alt","largeImageURL","onThumbClick","ImageGalleryItemImage","data-largeimageurl","onClick","ImageGallery","imagesArray","children","map","imageObj","id","webformatURL","tags","Button","modalRoot","document","querySelector","Modal","onEscClick","code","onClose","onModalClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","CloseModalBtn","imagesApi","App","showModal","isLoading","error","errorMsg","onChangeQuery","options","newImagesArray","prevState","scrollTo","top","documentElement","scrollHeight","behavior","catch","message","finally","nextPage","dataset","largeimageurl","openModal","currentId","Number","getAttribute","modalImageURL","find","image","closeModal","prevProps","Loader","color","height","width","timeout","ErrorMessage","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ff3c1ceb.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__hhW5L\",\"Modal\":\"Modal_Modal__OYw9r\",\"CloseModalBtn\":\"Modal_CloseModalBtn__15tcn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__Vzp-i\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__3EFp8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1Ye-j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__22BIx\"};","import axios from \"axios\";\r\nimport { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass ImagesApi extends Component {\r\n  static propTypes = {\r\n    searchQuery: PropTypes.string.isRequired,\r\n    currentPage: PropTypes.number.isRequired,\r\n  };\r\n\r\n  fetchImages = ({ searchQuery, currentPage }) => {\r\n    return axios\r\n      .get(\r\n        `https://pixabay.com/api/?q=${searchQuery}&page=${currentPage}&key=20677562-9c517eaf9134a4d9aa45dfdde&image_type=photo&orientation=horizontal&per_page=12`,\r\n      )\r\n      .then(responce => responce.data.hits);\r\n  };\r\n}\r\nexport default ImagesApi;\r\n","import React, { Component } from \"react\";\r\nimport styles from \"./Searchbar.module.css\";\r\n\r\nclass Searchbar extends Component {\r\n  state = {\r\n    query: \"\",\r\n  };\r\n\r\n  handleChange = event => {\r\n    this.setState({ query: event.currentTarget.value });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    this.props.onSubmit(this.state.query);\r\n    this.setState({ query: \"\" });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={styles.Searchbar}>\r\n        <form className={styles.SearchForm} onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className={styles.SearchFormBtn}>\r\n            <span className={styles.SearchFormBtnLabel}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={styles.SearchFormInput}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.handleChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport styles from \"./ImageGalleryItem.module.css\";\r\n\r\nconst ImageGalleryItem = ({ src, alt, largeImageURL, onThumbClick }) => {\r\n  return (\r\n    <li className={styles.ImageGalleryItem}>\r\n      <img\r\n        className={styles.ImageGalleryItemImage}\r\n        src={src}\r\n        alt={alt}\r\n        data-largeimageurl={largeImageURL}\r\n        onClick={onThumbClick}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  src: PropTypes.string.isRequired,\r\n  alt: PropTypes.string.isRequired,\r\n  largeImageURL: PropTypes.string.isRequired,\r\n  onThumbClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import PropTypes from \"prop-types\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem\";\r\nimport styles from \"./ImageGallery.module.css\";\r\n\r\nconst ImageGallery = ({ imagesArray, onThumbClick, children }) => (\r\n  <ul className={styles.ImageGallery}>\r\n    {imagesArray.map(imageObj => {\r\n      return (\r\n        <ImageGalleryItem\r\n          key={imageObj.id}\r\n          id={imageObj.id}\r\n          largeImageURL={imageObj.largeImageURL}\r\n          src={imageObj.webformatURL}\r\n          alt={imageObj.tags}\r\n          onThumbClick={onThumbClick}\r\n        />\r\n      );\r\n    })}\r\n    {children}\r\n  </ul>\r\n);\r\n\r\nImageGallery.propTypes = {\r\n  imagesArray: PropTypes.array.isRequired,\r\n  onThumbClick: PropTypes.func.isRequired,\r\n  children: PropTypes.node,\r\n};\r\n\r\nexport default ImageGallery;\r\n","import PropTypes from \"prop-types\";\r\nimport styles from \"./Button.module.css\";\r\n\r\nconst Button = ({ onClick, children }) => (\r\n  <button className={styles.Button} type=\"button\" onClick={onClick}>\r\n    {children}\r\n  </button>\r\n);\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func,\r\n  children: PropTypes.node,\r\n};\r\nexport default Button;\r\n","import React, { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport styles from \"./Modal.module.css\";\r\n\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.onEscClick);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.onEscClick);\r\n  }\r\n\r\n  onEscClick = event => {\r\n    if (event.code === \"Escape\") this.props.onClose();\r\n  };\r\n\r\n  onModalClick = event => {\r\n    if (event.target === event.currentTarget) this.props.onClose();\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className={styles.Overlay} onClick={this.onModalClick}>\r\n        <button\r\n          type=\"button\"\r\n          className={styles.CloseModalBtn}\r\n          onClick={() => {\r\n            this.props.onClose();\r\n          }}\r\n        >\r\n          X\r\n        </button>\r\n        <div className={styles.Modal}>{this.props.children}</div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n\r\nModal.propTypes = {\r\n  onClose: PropTypes.func,\r\n  children: PropTypes.node,\r\n};\r\n\r\nexport default Modal;\r\n","import React, { Component } from \"react\";\nimport ImagesApi from \"./services/images-api\";\nimport Searchbar from \"./components/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery\";\nimport Button from \"./components/Button\";\nimport Loader from \"react-loader-spinner\";\nimport Modal from \"./components/Modal\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport styles from \"./index.module.css\";\n\nconst imagesApi = new ImagesApi();\nclass App extends Component {\n  state = {\n    showModal: false,\n    searchQuery: \"\",\n    currentPage: 1,\n    imagesArray: [],\n    largeImageURL: \"\",\n    isLoading: false,\n    error: false,\n    errorMsg: \"\",\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchImages();\n    }\n  }\n\n  onChangeQuery = query => {\n    if (this.state.searchQuery === query) return;\n    this.setState({\n      searchQuery: query,\n      currentPage: 1,\n      imagesArray: [],\n      largeImageURL: \"\",\n      error: false,\n    });\n  };\n\n  fetchImages = () => {\n    const { searchQuery, currentPage } = this.state;\n    const options = {\n      searchQuery,\n      currentPage,\n    };\n    this.setState({ isLoading: true, error: false });\n    imagesApi\n      .fetchImages(options)\n      .then(newImagesArray => {\n        this.setState(prevState => ({\n          imagesArray: [...prevState.imagesArray, ...newImagesArray],\n          currentPage: prevState.currentPage + 1,\n        }));\n        if (currentPage > 1) {\n          window.scrollTo({\n            top: document.documentElement.scrollHeight,\n            behavior: \"smooth\",\n          });\n        }\n      })\n      .catch(error => {\n        this.setState({ error: true, errorMsg: error.message });\n      })\n      .finally(() => {\n        this.setState({ isLoading: false });\n        if (this.state.nextPage > 2)\n          window.scrollTo({\n            top: document.documentElement.scrollHeight,\n            behavior: \"smooth\",\n          });\n      });\n  };\n\n  onThumbClick = event => {\n    this.setState({\n      showModal: true,\n      largeImageURL: event.target.dataset.largeimageurl,\n    });\n  };\n\n  openModal = event => {\n    const { imagesArray } = this.state;\n    const currentId = Number(event.target.getAttribute(\"id\"));\n    const modalImageURL = imagesArray.find(image => image.id === currentId)\n      .largeImageURL;\n    this.setState({\n      showModal: true,\n      largeImageURL: modalImageURL,\n    });\n  };\n\n  closeModal = () => {\n    this.setState({ showModal: false, largeImageURL: \"\" });\n  };\n\n  render() {\n    const {\n      searchQuery,\n      imagesArray,\n      isLoading,\n      showModal,\n      largeImageURL,\n      error,\n      errorMsg,\n    } = this.state;\n    return (\n      <div className={styles.App}>\n        <Searchbar onSubmit={this.onChangeQuery} />\n        <ImageGallery\n          imagesArray={imagesArray}\n          onThumbClick={this.onThumbClick}\n          isLoading={isLoading}\n        />\n        {isLoading && (\n          <div className={styles.Loader}>\n            <Loader\n              type=\"Circles\"\n              color=\"#3f51d5\"\n              height={90}\n              width={90}\n              timeout={3000}\n            />\n          </div>\n        )}\n        {error && (\n          <>\n            <p className={styles.ErrorMessage}>Oops, something went wrong...</p>\n            <p className={styles.ErrorMessage}>{errorMsg}</p>\n          </>\n        )}\n        {imagesArray.length > 0 && !error && (\n          <Button onClick={this.fetchImages}>Load more</Button>\n        )}\n        {showModal && (\n          <Modal onClose={this.closeModal}>\n            <img src={largeImageURL} alt={searchQuery} />\n          </Modal>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.module.css\";\n/* import \"modern-normalize/modern-normalize.css\";\n */\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\"),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"src_App__2EFqF\",\"Loader\":\"src_Loader__3IezX\",\"ErrorMessage\":\"src_ErrorMessage__1oPW0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2Yvkk\",\"SearchForm\":\"Searchbar_SearchForm__2_7Lf\",\"SearchFormBtn\":\"Searchbar_SearchFormBtn__3CZgg\",\"SearchFormBtnLabel\":\"Searchbar_SearchFormBtnLabel__17Av5\",\"SearchFormInput\":\"Searchbar_SearchFormInput__37fh-\"};"],"sourceRoot":""}